[2025-03-20 18:47:33] [WARNING ] discord.gateway: Shard ID None heartbeat blocked for more than 10 seconds.
Loop thread traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 441, in <module>
    bot.run(DISCORD_TOKEN)
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 869, in run
    asyncio.run(runner())
  File "/usr/lib64/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib64/python3.9/asyncio/base_events.py", line 634, in run_until_complete
    self.run_forever()
  File "/usr/lib64/python3.9/asyncio/base_events.py", line 601, in run_forever
    self._run_once()
  File "/usr/lib64/python3.9/asyncio/base_events.py", line 1905, in _run_once
    handle._run()
  File "/usr/lib64/python3.9/asyncio/events.py", line 95, in _run
    self = None  # Needed to break cycles when an exception occurs.
  File "/usr/lib64/python3.9/asyncio/tasks.py", line 933, in callback
    raise
  File "/usr/lib64/python3.9/asyncio/futures.py", line 401, in _chain_future
    source.add_done_callback(_call_set_state)
  File "/usr/lib64/python3.9/asyncio/base_futures.py", line 21, in isfuture
    return (hasattr(obj.__class__, '_asyncio_future_blocking') and

[2025-03-20 18:47:37] [INFO    ] discord.gateway: Shard ID None session has been invalidated.
[2025-03-20 18:47:51] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 9c6ed006bf549f2028d6bad0d00d8a09).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Logged in as Cali#5463
[2025-03-20 18:49:30] [WARNING ] discord.gateway: Shard ID None heartbeat blocked for more than 10 seconds.
Loop thread traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 441, in <module>
    bot.run(DISCORD_TOKEN)
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 869, in run
    asyncio.run(runner())
  File "/usr/lib64/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib64/python3.9/asyncio/base_events.py", line 634, in run_until_complete
    self.run_forever()
  File "/usr/lib64/python3.9/asyncio/base_events.py", line 601, in run_forever
    self._run_once()
  File "/usr/lib64/python3.9/asyncio/base_events.py", line 1905, in _run_once
    handle._run()
  File "/usr/lib64/python3.9/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "/usr/lib64/python3.9/asyncio/selector_events.py", line 811, in _read_ready
    self._read_ready_cb()
  File "/usr/lib64/python3.9/asyncio/selector_events.py", line 868, in _read_ready__data_received
    self._protocol.data_received(data)

[2025-03-20 18:49:32] [ERROR   ] discord.client: Attempting a reconnect in 1.74s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_MkK1hroi2sfEnuolSnNslbiu
[2025-03-20 18:49:41] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session 9c6ed006bf549f2028d6bad0d00d8a09.
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚è≥ Initiating shutdown...
‚úÖ Async database connection closed.
‚úÖ Shutdown complete. Exiting process now...
[2025-03-20 18:51:22] [INFO    ] discord.client: logging in using static token
[2025-03-20 18:51:23] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: fea01479004b0fb2f9fb94b520f36aa2).
Task exception was never retrieved
future: <Task finished name='Task-10' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:178> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 190, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 129, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-12' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:178> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 190, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 129, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Logged in as Cali#5463
[2025-03-20 18:59:03] [INFO    ] discord.client: logging in using static token
[2025-03-20 18:59:03] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 38fbb47db07f564ff72792c058a2e99b).
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
[2025-03-20 19:02:39] [INFO    ] discord.client: logging in using static token
[2025-03-20 19:02:40] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 2a88f85f28809579d70e51110f2fde5e).
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
Task exception was never retrieved
future: <Task finished name='Task-16' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:178> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 190, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 129, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-21' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:178> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 190, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 129, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
[2025-03-20 19:09:30] [INFO    ] discord.client: logging in using static token
[2025-03-20 19:09:31] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: f8bfbb58f110163b881f8fa86f817503).
Task exception was never retrieved
future: <Task finished name='Task-10' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:178> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 190, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 129, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
[2025-03-20 19:11:27] [INFO    ] discord.client: logging in using static token
[2025-03-20 19:11:28] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 86d739f463dcd29307bb80ef8d41d92a).
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
[2025-03-20 19:19:57] [INFO    ] discord.client: logging in using static token
[2025-03-20 19:19:58] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: adc6a5b3166d57e925151ad726273ebf).
Task exception was never retrieved
future: <Task finished name='Task-10' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:178> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 190, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 129, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Logged in as Cali#5463
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_MkK1hroi2sfEnuolSnNslbiu
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Retrieved existing thread from cache/MySQL for user 973680778200358932: thread_kSugRCOPvyBozTAAazs1LpCo
‚úÖ Stored thread ID for user 973680778200358932. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hello
‚è≥ Processing OpenAI request...
‚úÖ Retrieved existing thread from cache/MySQL for user 973680778200358932: thread_kSugRCOPvyBozTAAazs1LpCo
‚úÖ Stored thread ID for user 973680778200358932. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: what is 2 plus 2
‚è≥ Processing OpenAI request...
‚úÖ Retrieved existing thread from cache/MySQL for user 973680778200358932: thread_kSugRCOPvyBozTAAazs1LpCo
‚úÖ Stored thread ID for user 973680778200358932. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: thanks
‚è≥ Processing OpenAI request...
[2025-03-20 20:53:32] [ERROR   ] discord.client: Attempting a reconnect in 0.52s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-20 20:53:32] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-20 23:18:26] [ERROR   ] discord.client: Attempting a reconnect in 2.00s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-20 23:18:28] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_MkK1hroi2sfEnuolSnNslbiu
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
[2025-03-20 23:47:50] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 02:03:40] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 02:05:59] [ERROR   ] discord.client: Attempting a reconnect in 0.29s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-21 02:05:59] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 06:03:35] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 08:22:41] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 08:47:54] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 09:39:45] [ERROR   ] discord.client: Attempting a reconnect in 1.34s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-21 09:39:46] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 11:11:24] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 14:15:37] [ERROR   ] discord.client: Attempting a reconnect in 1.85s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-21 14:15:39] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 16:31:22] [ERROR   ] discord.client: Attempting a reconnect in 1.48s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-21 16:31:23] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_MkK1hroi2sfEnuolSnNslbiu
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_MkK1hroi2sfEnuolSnNslbiu
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: what is up
‚ö†Ô∏è Ignoring message in thread thread_MkK1hroi2sfEnuolSnNslbiu - already processing.
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_MkK1hroi2sfEnuolSnNslbiu
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Howdy partner
‚è≥ Processing OpenAI request...
[2025-03-21 20:14:59] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
üßπ ‚úÖ Removed cached thread for inactive user 973680778200358932.
[2025-03-21 21:05:27] [ERROR   ] discord.client: Attempting a reconnect in 0.29s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-21 21:05:27] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 00:08:20] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 02:59:17] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 05:04:12] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 07:58:31] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 09:03:34] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 10:55:33] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 13:16:48] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 15:35:38] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 15:53:09] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 16:44:59] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 18:30:32] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
üßπ ‚úÖ Removed cached thread for inactive user 1304209255741784141.
[2025-03-22 22:30:27] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 01:48:02] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 04:43:30] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 05:58:45] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 06:14:30] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 06:40:22] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 09:52:49] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 11:17:39] [ERROR   ] discord.client: Attempting a reconnect in 1.52s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-23 11:17:40] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 14:43:40] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 16:02:58] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 18:48:35] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 20:37:13] [ERROR   ] discord.client: Attempting a reconnect in 1.56s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-23 20:37:14] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 22:57:50] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 00:19:20] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 03:04:28] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 05:43:48] [ERROR   ] discord.client: Attempting a reconnect in 0.58s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 05:43:49] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 07:53:24] [ERROR   ] discord.client: Attempting a reconnect in 1.52s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 07:53:26] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 08:56:06] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 09:56:32] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 10:17:50] [ERROR   ] discord.client: Attempting a reconnect in 1.78s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 10:17:52] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 10:39:52] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 11:11:03] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 12:38:38] [ERROR   ] discord.client: Attempting a reconnect in 0.72s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 12:38:39] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 13:51:54] [ERROR   ] discord.client: Attempting a reconnect in 0.99s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 13:51:55] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 14:18:21] [ERROR   ] discord.client: Attempting a reconnect in 0.98s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 14:18:22] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 14:26:46] [ERROR   ] discord.client: Attempting a reconnect in 3.81s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 14:26:50] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 15:59:27] [ERROR   ] discord.client: Attempting a reconnect in 0.33s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 15:59:27] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 16:10:12] [ERROR   ] discord.client: Attempting a reconnect in 4.00s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 16:10:16] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 16:13:10] [INFO    ] discord.client: logging in using static token
[2025-03-24 16:13:12] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 4b6c6d7a173b883af5f0d2f51536991e).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table created or verified
‚úÖ Logged in as Cali#5463
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_MkK1hroi2sfEnuolSnNslbiu
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 772 tokens
‚úÖ Token usage recorded - Purpose: general, Model: gpt-4o-mini, Prompt: 762, Completion: 10, Total: 772
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_0VEAv2pqRkPwUQf6iihE5pJ6
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 779 tokens
‚úÖ Token usage recorded - Purpose: general, Model: gpt-4o-mini, Prompt: 768, Completion: 11, Total: 779
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_0VEAv2pqRkPwUQf6iihE5pJ6
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Summarize this
üîπ Detected image: https://cdn.discordapp.com/attachments/1341170981867225140/1353763925526839361/IMG_1877.png?ex=67e2d667&is=67e184e7&hm=1ab4904dbcc7eedd0a0ba2701bc53781bd5c31fbca5c905b4ecb4cf39e72e134&
‚úÖ Image successfully saved at: discord-images/img_1877.png
‚úÖ Image uploaded to OpenAI. File ID: file-RyZgrS9ksuELbGAHPbBJWG
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 6501 tokens
‚úÖ Token usage recorded - Purpose: general, Model: gpt-4o-mini, Prompt: 6429, Completion: 72, Total: 6501
‚è≥ Initiating shutdown...
‚úÖ Async database connection closed.
‚úÖ Shutdown complete. Exiting process now...
[2025-03-24 16:18:12] [INFO    ] discord.client: logging in using static token
[2025-03-24 16:18:13] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: fdc099d0600d479f93e13a93169f0a34).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/aiomysql/cursors.py:239: Warning: Table 'token_tracking' already exists
  await self._query(query)
‚úÖ Token tracking table created or verified
‚úÖ Logged in as Cali#5463
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_0VEAv2pqRkPwUQf6iihE5pJ6
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚ùå Failed to log token usage: (1054, "Unknown column 'purpose' in 'field list'")
‚úÖ Token usage recorded - Purpose: Cali's Response Guidelines

### Core Directives
You are Cali. This stands for Creative AI for Learni, Model: gpt-4o-mini, Prompt: 6485, Completion: 11, Total: 6496
[2025-03-24 16:25:57] [INFO    ] discord.client: logging in using static token
[2025-03-24 16:25:57] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 366b88722b9e316e529af4344106b224).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/aiomysql/cursors.py:239: Warning: Table 'token_tracking' already exists
  await self._query(query)
‚úÖ Token tracking table created or verified
‚úÖ Logged in as Cali#5463
[2025-03-24 16:26:33] [INFO    ] discord.client: logging in using static token
[2025-03-24 16:26:34] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 3613b14fa9c0446a2ef43ba4822ae150).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/aiomysql/cursors.py:239: Warning: Table 'token_tracking' already exists
  await self._query(query)
‚úÖ Token tracking table created or verified
‚úÖ Logged in as Cali#5463
‚úÖ Created new thread for user 1304209255741784141: thread_rlRL3VoPKAcTF8fiYNLxLqre
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 641 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 630, Completion: 11, Total: 641
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_rlRL3VoPKAcTF8fiYNLxLqre
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: What is the capital of china
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 658 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 653, Completion: 5, Total: 658
‚úÖ Created new thread for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Summarize this for me
üìÑ Detected file: https://cdn.discordapp.com/attachments/1341170981867225140/1353767275446014126/GLOBAL_-_Phone_3a_Series_-_Press_Release.pdf?ex=67e2d986&is=67e18806&hm=9ce4d745b38fcb585da55000fa5197b55513ba6138ca74253a6040b0db7db8d2&
‚úÖ File successfully saved at: discord-files/global_-_phone_3a_series_-_press_release.pdf
‚úÖ Extracted 11285 characters from global_-_phone_3a_series_-_press_release.pdf
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 3385 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 3242, Completion: 143, Total: 3385
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Howdy
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 3403 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 3392, Completion: 11, Total: 3403
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: What‚Äôs up
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 3437 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 3412, Completion: 25, Total: 3437
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Nothing really just checking in
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 3476 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 3448, Completion: 28, Total: 3476
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 3495 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 3483, Completion: 12, Total: 3495
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: What‚Äôs up
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 3521 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 3504, Completion: 17, Total: 3521
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Tell me about the moon
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 3636 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 3532, Completion: 104, Total: 3636
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: My favorite color is purple
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 1059 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 1030, Completion: 29, Total: 1059
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Cool
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 940 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 916, Completion: 24, Total: 940
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Thanks
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 941 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 927, Completion: 14, Total: 941
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Great
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 927 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 912, Completion: 15, Total: 927
[2025-03-24 16:53:29] [INFO    ] discord.client: logging in using static token
[2025-03-24 16:53:29] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 7a54b7983cd08b2d502b7086d7cff1f1).
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
Task exception was never retrieved
future: <Task finished name='Task-10' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:222> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 234, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 171, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-15' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:222> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 234, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 171, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-20' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:222> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 234, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 171, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
[2025-03-24 16:59:36] [INFO    ] discord.client: logging in using static token
[2025-03-24 16:59:37] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 794b5630718d24df9a73bcc0336c419f).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ Logged in as Cali#5463
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 903 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 892, Completion: 11, Total: 903
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 807 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 795, Completion: 12, Total: 807
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: What does this show
üîπ Detected image: https://cdn.discordapp.com/attachments/1341170981867225140/1353776602282201301/IMG_1727.jpg?ex=67e2e235&is=67e190b5&hm=db43134d240c096aeb789b0627f83485cc0265311aa710a38fdf66ede2bff635&
‚úÖ Image successfully saved at: discord-images/img_1727.jpg
‚úÖ Image uploaded to OpenAI. File ID: file-89mNvMm9uvC3i3QUnG58eL
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 6480 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 6447, Completion: 33, Total: 6480
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_rlRL3VoPKAcTF8fiYNLxLqre
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: three key points from this document
üìÑ Detected file: https://cdn.discordapp.com/attachments/1341092221046493275/1353777039576006676/Phoenix_Real_Estate_2025.pdf?ex=67e2e29e&is=67e1911e&hm=09d1b725853fd90372d637da919b12d515ffa291c07f2fad195b4ac48661a6e0&
‚úÖ File successfully saved at: discord-files/phoenix_real_estate_2025.pdf
‚úÖ Extracted 4291 characters from phoenix_real_estate_2025.pdf
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 1769 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 1552, Completion: 217, Total: 1769
[2025-03-24 17:26:11] [INFO    ] discord.client: logging in using static token
[2025-03-24 17:26:11] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 3062234af49058ff6e903a43bcfb6cf8).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ User lookup table created
‚úÖ Logged in as Cali#5463
/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
‚úÖ Updated username mapping for dje85 (548752969395470337)
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 6467 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 6456, Completion: 11, Total: 6467
/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
‚úÖ Updated username mapping for creativecampus (1304209255741784141)
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_rlRL3VoPKAcTF8fiYNLxLqre
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 1788 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 1776, Completion: 12, Total: 1788
[2025-03-24 17:29:38] [INFO    ] discord.client: logging in using static token
[2025-03-24 17:29:41] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 909ddce411c188fa4def083a63d14868).
‚ùå Failed to update username lookup: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-10' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:270> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 285, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 198, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
‚ùå Failed to update username lookup: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-11' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:270> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 285, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 198, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
‚ùå Failed to update username lookup: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-16' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:270> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 285, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 198, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
[2025-03-24 17:31:00] [INFO    ] discord.client: logging in using static token
[2025-03-24 17:31:01] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 04579b58772e1a50b928ce41a8dc9972).
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
‚ùå Failed to update username lookup: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-10' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:270> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 285, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 198, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
‚è≥ Initiating shutdown...
‚úÖ Shutdown complete. Exiting process now...
[2025-03-24 17:33:01] [INFO    ] discord.client: logging in using static token
[2025-03-24 17:33:01] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: ee0baef10992f74b9a4f73e320052013).
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
‚è≥ Initiating shutdown...
‚úÖ Shutdown complete. Exiting process now...
[2025-03-24 17:41:10] [INFO    ] discord.client: logging in using static token
[2025-03-24 17:41:10] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: dae353920ecd5a4d22888f5652762702).
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
‚ùå Failed to update username lookup: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-10' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:270> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 285, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 198, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
[2025-03-24 17:44:19] [INFO    ] discord.client: logging in using static token
[2025-03-24 17:44:20] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 7c908b1e710ef3eb0acaf766401154c7).
‚úÖ Bot logged in as Cali#5463
‚è≥ Database connection attempt 1/5...
‚ùå Database connection attempt 1 failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚è≥ Waiting 10 seconds before retrying...
‚è≥ Database connection attempt 2/5...
‚ùå Database connection attempt 2 failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚è≥ Waiting 10 seconds before retrying...
‚è≥ Initiating shutdown...
‚úÖ Shutdown complete. Exiting process now...
[2025-03-24 17:45:32] [INFO    ] discord.client: logging in using static token
[2025-03-24 17:45:32] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 7e19129866740d85c0117581c3411609).
‚úÖ Bot logged in as Cali#5463
‚è≥ Database connection attempt 1/5...
‚ùå Database connection attempt 1 failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚è≥ Waiting 10 seconds before retrying...
‚è≥ Database connection attempt 2/5...
‚ùå Database connection attempt 2 failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚è≥ Waiting 10 seconds before retrying...
‚è≥ Database connection attempt 3/5...
‚ùå Database connection attempt 3 failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚è≥ Waiting 10 seconds before retrying...
‚è≥ Database connection attempt 4/5...
‚ùå Database connection attempt 4 failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚è≥ Waiting 10 seconds before retrying...
‚è≥ Database connection attempt 5/5...
‚ùå Database connection attempt 5 failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå All 5 connection attempts failed
‚ùå Failed to connect to database - some functionality will be limited
[2025-03-24 17:52:03] [INFO    ] discord.client: logging in using static token
[2025-03-24 17:52:04] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 0992aad06724b2283faed6749debdfd3).
‚úÖ Bot logged in as Cali#5463
‚è≥ Database connection attempt 1/5...
‚úÖ Connected to MySQL database (async)
‚úÖ Database connection established and ready
‚è≥ Waiting for database to be ready...
‚ùå Failed to check/create tables: Task <Task pending name='Task-10' coro=<Event.wait() running at /usr/lib64/python3.9/asyncio/locks.py:226> cb=[_release_waiter(<Future pendi...e8ab8d610>()]>)() at /usr/lib64/python3.9/asyncio/tasks.py:416]> got Future <Future pending> attached to a different loop
/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
‚úÖ Updated username mapping for dje85 (548752969395470337)
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 6454 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 6445, Completion: 9, Total: 6454
‚è≥ Initiating shutdown...
‚úÖ Async database connection closed.
‚úÖ Shutdown complete. Exiting process now...
‚úÖ Starting AI Assistant Bot
‚úÖ Python version: 3.9.20 (main, Jan 25 2025, 00:00:00) 
[GCC 11.4.1 20230605 (Red Hat 11.4.1-2)]
‚úÖ Running from: /home/ec2-user/ai-assistant
‚úÖ Directory setup complete
[2025-03-24 17:53:27] [INFO    ] discord.client: logging in using static token
[2025-03-24 17:53:28] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: cf019a59ce340cb33ef273c530532328).
‚úÖ Bot logged in as Cali#5463
‚ùå CRITICAL: cryptography package not found - Required for MySQL authentication

‚ùå CRITICAL PACKAGES MISSING:
The following essential packages are not installed: cryptography

Please install missing packages with:
pip install cryptography

If using a virtual environment, activate it first with:
source /path/to/venv/bin/activate
‚ö†Ô∏è Bot will continue but some functionality will be limited
‚ùå CRITICAL: 'cryptography' package is required for MySQL authentication
Please install it with: pip install cryptography
If using a virtual environment, ensure it's activated
‚ùå Failed to connect to database - functionality will be limited
Users will still be able to interact with the bot, but some features won't work

‚è≥ Initiating shutdown...
‚ö†Ô∏è Error during cleanup: This event loop is already running
/home/ec2-user/ai-assistant/bot.py:309: RuntimeWarning: coroutine 'cleanup' was never awaited
  print(f"‚ö†Ô∏è Error during cleanup: {e}")
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
‚úÖ Shutdown complete. Exiting process now...
‚úÖ Starting AI Assistant Bot
‚úÖ Python version: 3.9.20 (main, Jan 25 2025, 00:00:00) 
[GCC 11.4.1 20230605 (Red Hat 11.4.1-2)]
‚úÖ Running from: /home/ec2-user/ai-assistant
‚úÖ Directory setup complete
[2025-03-24 17:55:19] [INFO    ] discord.client: logging in using static token
[2025-03-24 17:55:19] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 7fe30df1ca8da5b57048e545c2ba700b).
‚úÖ Bot logged in as Cali#5463
‚ùå CRITICAL: cryptography package not found - Required for MySQL authentication

‚ùå CRITICAL PACKAGES MISSING:
The following essential packages are not installed: cryptography

Please install missing packages with:
pip install cryptography

If using a virtual environment, activate it first with:
source /path/to/venv/bin/activate
‚ö†Ô∏è Bot will continue but some functionality will be limited
‚ùå CRITICAL: 'cryptography' package is required for MySQL authentication
Please install it with: pip install cryptography
If using a virtual environment, ensure it's activated
‚ùå Failed to connect to database - functionality will be limited
Users will still be able to interact with the bot, but some features won't work

‚è≥ Initiating shutdown...
‚ö†Ô∏è Error during cleanup: This event loop is already running
/home/ec2-user/ai-assistant/bot.py:309: RuntimeWarning: coroutine 'cleanup' was never awaited
  print(f"‚ö†Ô∏è Error during cleanup: {e}")
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
‚úÖ Shutdown complete. Exiting process now...
‚úÖ Starting AI Assistant Bot
‚úÖ Python version: 3.9.20 (main, Jan 25 2025, 00:00:00) 
[GCC 11.4.1 20230605 (Red Hat 11.4.1-2)]
‚úÖ Running from: /home/ec2-user/ai-assistant
‚úÖ Directory setup complete
[2025-03-24 17:55:39] [INFO    ] discord.client: logging in using static token
[2025-03-24 17:55:40] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 3e4a19330c6e0c4ebe9b8ad2a33ee7ca).
‚úÖ Bot logged in as Cali#5463
‚ùå CRITICAL: cryptography package not found - Required for MySQL authentication

‚ùå CRITICAL PACKAGES MISSING:
The following essential packages are not installed: cryptography

Please install missing packages with:
pip install cryptography

If using a virtual environment, activate it first with:
source /path/to/venv/bin/activate
‚ö†Ô∏è Bot will continue but some functionality will be limited
‚ùå CRITICAL: 'cryptography' package is required for MySQL authentication
Please install it with: pip install cryptography
If using a virtual environment, ensure it's activated
‚ùå Failed to connect to database - functionality will be limited
Users will still be able to interact with the bot, but some features won't work

‚è≥ Initiating shutdown...
‚ö†Ô∏è Error during cleanup: This event loop is already running
/home/ec2-user/ai-assistant/bot.py:309: RuntimeWarning: coroutine 'cleanup' was never awaited
  # ‚úÖ Add image to content_data
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
‚úÖ Shutdown complete. Exiting process now...
[2025-03-24 17:59:18] [INFO    ] discord.client: logging in using static token
[2025-03-24 17:59:19] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 48dc69ece56cd38ac7be3f858bd4ee18).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ Logged in as Cali#5463
‚úÖ Starting AI Assistant Bot
‚úÖ Python version: 3.9.20 (main, Jan 25 2025, 00:00:00) 
[GCC 11.4.1 20230605 (Red Hat 11.4.1-2)]
‚úÖ Running from: /home/ec2-user/ai-assistant
‚úÖ Directory setup complete
[2025-03-24 17:59:53] [INFO    ] discord.client: logging in using static token
[2025-03-24 17:59:54] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 3a664ed8cd480c9a37062d30f444d42b).
‚úÖ Bot logged in as Cali#5463
‚ùå CRITICAL: cryptography package not found - Required for MySQL authentication

‚ùå CRITICAL PACKAGES MISSING:
The following essential packages are not installed: cryptography

Please install missing packages with:
pip install cryptography

If using a virtual environment, activate it first with:
source /path/to/venv/bin/activate
‚ö†Ô∏è Bot will continue but some functionality will be limited
‚ùå CRITICAL: 'cryptography' package is required for MySQL authentication
Please install it with: pip install cryptography
If using a virtual environment, ensure it's activated
‚ùå Failed to connect to database - functionality will be limited
Users will still be able to interact with the bot, but some features won't work

‚è≥ Initiating shutdown...
‚ö†Ô∏è Error during cleanup: This event loop is already running
/home/ec2-user/ai-assistant/bot.py:309: RuntimeWarning: coroutine 'cleanup' was never awaited
  print(f"‚ö†Ô∏è Error during cleanup: {e}")
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
‚úÖ Shutdown complete. Exiting process now...
‚úÖ Starting AI Assistant Bot
‚úÖ Python version: 3.9.20 (main, Jan 25 2025, 00:00:00) 
[GCC 11.4.1 20230605 (Red Hat 11.4.1-2)]
‚úÖ Running from: /home/ec2-user/ai-assistant
‚úÖ Directory setup complete
[2025-03-24 18:00:23] [INFO    ] discord.client: logging in using static token
[2025-03-24 18:00:24] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: be7a346857d80d45e1b109bf0166e707).
‚úÖ Bot logged in as Cali#5463
‚ùå CRITICAL: cryptography package not found - Required for MySQL authentication

‚ùå CRITICAL PACKAGES MISSING:
The following essential packages are not installed: cryptography

Please install missing packages with:
pip install cryptography

If using a virtual environment, activate it first with:
source /path/to/venv/bin/activate
‚ö†Ô∏è Bot will continue but some functionality will be limited
‚ùå CRITICAL: 'cryptography' package is required for MySQL authentication
Please install it with: pip install cryptography
If using a virtual environment, ensure it's activated
‚ùå Failed to connect to database - functionality will be limited
Users will still be able to interact with the bot, but some features won't work

‚è≥ Initiating shutdown...
‚ö†Ô∏è Error during cleanup: This event loop is already running
/home/ec2-user/ai-assistant/bot.py:309: RuntimeWarning: coroutine 'cleanup' was never awaited
  # ‚úÖ Add image to content_data
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
‚úÖ Shutdown complete. Exiting process now...
[2025-03-24 18:00:30] [INFO    ] discord.client: logging in using static token
[2025-03-24 18:00:32] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: fbe013e04fbaa474d61dc09f91e31871).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ Logged in as Cali#5463
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 6453 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 6443, Completion: 10, Total: 6453
‚úÖ Created new thread for user 973680778200358932: thread_92bWGTgZvf137JuVgm6m4zYM
‚úÖ Stored thread ID for user 973680778200358932. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: HEY
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 973680778200358932: 641 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 630, Completion: 11, Total: 641
[2025-03-24 18:03:09] [INFO    ] discord.client: logging in using static token
[2025-03-24 18:03:10] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 149ad5a3569bd0fd3deb538573a22a4d).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ User lookup table already exists
‚úÖ Logged in as Cali#5463
/home/ec2-user/ai-assistant/venv/lib/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
‚úÖ Updated username mapping for victoriamirocke (973680778200358932)
‚úÖ Retrieved existing thread from cache/MySQL for user 973680778200358932: thread_92bWGTgZvf137JuVgm6m4zYM
‚úÖ Stored thread ID for user 973680778200358932. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 973680778200358932: 659 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 648, Completion: 11, Total: 659
[2025-03-24 18:05:50] [INFO    ] discord.client: logging in using static token
[2025-03-24 18:05:51] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: c976a7b3058dd85f57f9681fc50d28f0).
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
Defaulting to user installation because normal site-packages is not writeable
Requirement already satisfied: cryptography in /usr/lib64/python3.9/site-packages (36.0.1)
Collecting cryptography
  Downloading cryptography-44.0.2-cp39-abi3-manylinux_2_34_x86_64.whl.metadata (5.7 kB)
Requirement already satisfied: pymysql in /home/ec2-user/.local/lib/python3.9/site-packages (1.1.1)
Requirement already satisfied: aiomysql in /home/ec2-user/.local/lib/python3.9/site-packages (0.2.0)
Requirement already satisfied: cffi>=1.12 in /usr/lib64/python3.9/site-packages (from cryptography) (1.14.5)
Requirement already satisfied: pycparser in /usr/lib/python3.9/site-packages (from cffi>=1.12->cryptography) (2.20)
Requirement already satisfied: ply==3.11 in /usr/lib/python3.9/site-packages (from pycparser->cffi>=1.12->cryptography) (3.11)
Downloading cryptography-44.0.2-cp39-abi3-manylinux_2_34_x86_64.whl (4.2 MB)
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ 4.2/4.2 MB 82.8 MB/s eta 0:00:00
Installing collected packages: cryptography
ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.
awscli 2.17.18 requires cryptography<40.0.2,>=3.3.2, but you have cryptography 44.0.2 which is incompatible.
awscli 2.17.18 requires distro<1.9.0,>=1.5.0, but you have distro 1.9.0 which is incompatible.
Successfully installed cryptography-44.0.2
/home/ec2-user/ai-assistant/start_bot.sh: line 12: python: command not found
Defaulting to user installation because normal site-packages is not writeable
Requirement already satisfied: cryptography in /home/ec2-user/.local/lib/python3.9/site-packages (44.0.2)
Requirement already satisfied: pymysql in /home/ec2-user/.local/lib/python3.9/site-packages (1.1.1)
Requirement already satisfied: aiomysql in /home/ec2-user/.local/lib/python3.9/site-packages (0.2.0)
Requirement already satisfied: cffi>=1.12 in /usr/lib64/python3.9/site-packages (from cryptography) (1.14.5)
Requirement already satisfied: pycparser in /usr/lib/python3.9/site-packages (from cffi>=1.12->cryptography) (2.20)
Requirement already satisfied: ply==3.11 in /usr/lib/python3.9/site-packages (from pycparser->cffi>=1.12->cryptography) (3.11)
/home/ec2-user/ai-assistant/start_bot.sh: line 12: python: command not found
Defaulting to user installation because normal site-packages is not writeable
Requirement already satisfied: cryptography in /home/ec2-user/.local/lib/python3.9/site-packages (44.0.2)
Requirement already satisfied: pymysql in /home/ec2-user/.local/lib/python3.9/site-packages (1.1.1)
Requirement already satisfied: aiomysql in /home/ec2-user/.local/lib/python3.9/site-packages (0.2.0)
Requirement already satisfied: cffi>=1.12 in /usr/lib64/python3.9/site-packages (from cryptography) (1.14.5)
Requirement already satisfied: pycparser in /usr/lib/python3.9/site-packages (from cffi>=1.12->cryptography) (2.20)
Requirement already satisfied: ply==3.11 in /usr/lib/python3.9/site-packages (from pycparser->cffi>=1.12->cryptography) (3.11)
/home/ec2-user/ai-assistant/start_bot.sh: line 12: python: command not found
[2025-03-24 18:12:36] Changed to working directory: /home/ec2-user/ai-assistant
[2025-03-24 18:12:36] Activating virtual environment...
[2025-03-24 18:12:36] Using Python 3.9.20
[2025-03-24 18:12:36] Verifying packages...
[2025-03-24 18:12:37] Starting bot...
[2025-03-24 18:12:39] [INFO    ] discord.client: logging in using static token
[2025-03-24 18:12:40] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 26c71b52208aa642c73d928df1d995ec).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ User lookup table already exists
‚úÖ Logged in as Cali#5463
/home/ec2-user/.local/lib/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
‚úÖ Updated username mapping for dje85 (548752969395470337)
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 782 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 772, Completion: 10, Total: 782
/home/ec2-user/.local/lib/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
‚úÖ Updated username mapping for dje85 (548752969395470337)
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 760 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 749, Completion: 11, Total: 760
‚ùå Failed to update username lookup: (2003, "Can't connect to MySQL server on 'localhost'")
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚ùå Failed to store thread ID: (2003, "Can't connect to MySQL server on 'localhost'")
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚è≥ Initiating shutdown...
‚úÖ Async database connection closed.
‚úÖ Shutdown complete. Exiting process now...
[2025-03-24 18:14:32] Changed to working directory: /home/ec2-user/ai-assistant
[2025-03-24 18:14:32] Activating virtual environment...
[2025-03-24 18:14:32] Using Python 3.9.20
[2025-03-24 18:14:32] Verifying packages...
[2025-03-24 18:14:34] Starting bot...
[2025-03-24 18:14:37] [INFO    ] discord.client: logging in using static token
[2025-03-24 18:14:38] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 4e6ed1f4c052b88554a8a47a735024b6).
‚ùå Async database connection failed: Packet sequence number wrong - got 3 expected 4
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
‚ùå Failed to update username lookup: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-10' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:270> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 285, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 198, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
‚ùå Failed to update username lookup: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-15' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:270> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 285, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 198, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
‚ùå Failed to update username lookup: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-28' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:270> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 285, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 198, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
‚ùå Failed to update username lookup: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-33' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:270> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 285, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 198, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
‚ùå Failed to update username lookup: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-37' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:270> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 285, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 198, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
[2025-03-24 18:42:54] === Bot startup initiated ===
[2025-03-24 18:42:54] Waiting for MySQL to be fully ready...
[2025-03-24 18:42:54] MySQL is ready after 1 attempts
[2025-03-24 18:42:54] Changed to working directory: /home/ec2-user/ai-assistant
[2025-03-24 18:42:54] Activating virtual environment...
[2025-03-24 18:42:54] Using Python 3.9.20
[2025-03-24 18:42:54] Verifying packages...
[2025-03-24 18:42:55] Starting bot...
[2025-03-24 18:42:58] [INFO    ] discord.client: logging in using static token
[2025-03-24 18:42:59] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 6c0d74442a30818e8141af2f81c6558d).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ User lookup table already exists
‚úÖ Logged in as Cali#5463
/home/ec2-user/.local/lib/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
‚úÖ Updated username mapping for dje85 (548752969395470337)
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚ùå Error: Error code: 400 - {'error': {'message': 'Thread thread_5nTTB7tWKycc9frBkfvicbyC already has an active run run_LqX1y1zVFFfyNShaORSVxsfi.', 'type': 'invalid_request_error', 'param': None, 'code': None}}
/home/ec2-user/.local/lib/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
‚úÖ Updated username mapping for dje85 (548752969395470337)
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚ö†Ô∏è Ignoring message in thread thread_5nTTB7tWKycc9frBkfvicbyC - already processing.
‚úÖ Updated username mapping for dje85 (548752969395470337)
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: What‚Äôs up?
‚ö†Ô∏è Ignoring message in thread thread_5nTTB7tWKycc9frBkfvicbyC - already processing.
‚úÖ Updated username mapping for dje85 (548752969395470337)
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Howdy partner
‚ö†Ô∏è Ignoring message in thread thread_5nTTB7tWKycc9frBkfvicbyC - already processing.
[2025-03-24 18:45:07] === Bot startup initiated ===
[2025-03-24 18:45:07] Waiting for MySQL to be fully ready...
[2025-03-24 18:45:07] MySQL is ready after 1 attempts
[2025-03-24 18:45:07] Changed to working directory: /home/ec2-user/ai-assistant
[2025-03-24 18:45:07] Activating virtual environment...
[2025-03-24 18:45:07] Using Python 3.9.20
[2025-03-24 18:45:07] Verifying packages...
mysqld is alive
[2025-03-24 18:56:42] [INFO    ] discord.client: logging in using static token
[2025-03-24 18:56:43] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 69c1af13694d1eaa1499b91b0f66019c).
/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
[2025-03-24 19:00:30] [INFO    ] discord.client: logging in using static token
[2025-03-24 19:00:31] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: d89e1accb72aee315df22cd28db9fca2).
/home/ec2-user/.local/lib/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
/home/ec2-user/.local/lib/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
Waiting for MySQL to be fully ready...
MySQL is ready!
[2025-03-24 19:06:55] [INFO    ] discord.client: logging in using static token
[2025-03-24 19:06:56] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 50fb30c388b512575a9a1b1a77e12892).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ User lookup table already exists
‚úÖ Logged in as Cali#5463
/home/ec2-user/.local/lib/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
‚úÖ Updated username mapping for dje85 (548752969395470337)
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 771 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 761, Completion: 10, Total: 771
‚è≥ Initiating shutdown...
‚úÖ Async database connection closed.
‚úÖ Shutdown complete. Exiting process now...
Waiting for MySQL to be fully ready...
MySQL is ready!
[2025-03-24 19:07:33] [INFO    ] discord.client: logging in using static token
[2025-03-24 19:07:34] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: bd98753fdce2e27cbdd898a56487b6d3).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ User lookup table already exists
‚úÖ Logged in as Cali#5463
‚è≥ Initiating shutdown...
‚úÖ Async database connection closed.
‚úÖ Shutdown complete. Exiting process now...
Waiting for MySQL to be fully ready...
MySQL is ready!
[2025-03-24 19:09:39] [INFO    ] discord.client: logging in using static token
[2025-03-24 19:09:39] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 53b54bccbba10375c063214ae89e305b).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ User lookup table already exists
‚úÖ Logged in as Cali#5463
/home/ec2-user/.local/lib/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
‚úÖ Updated username mapping for dje85 (548752969395470337)
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Howdy
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 772 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 760, Completion: 12, Total: 772
/home/ec2-user/.local/lib/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
‚úÖ Updated username mapping for dje85 (548752969395470337)
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Updated username mapping for victoriamirocke (973680778200358932)
‚úÖ Created new thread for user 973680778200358932: thread_B9cVh0HSSgp06zl4GsjjoE2D
‚úÖ Stored thread ID for user 973680778200358932. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hi
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 773 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 762, Completion: 11, Total: 773
‚úÖ Logged token usage for user 973680778200358932: 646 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 630, Completion: 16, Total: 646
‚úÖ Updated username mapping for creativecampus (1304209255741784141)
‚úÖ Created new thread for user 1304209255741784141: thread_3XlE2NefcBEkIbhcsVxT1I1V
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: What is the capital of utah
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 642 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 636, Completion: 6, Total: 642
‚úÖ Updated username mapping for creativecampus (1304209255741784141)
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_3XlE2NefcBEkIbhcsVxT1I1V
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: thanks
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 654 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 649, Completion: 5, Total: 654
‚úÖ Updated username mapping for creativecampus (1304209255741784141)
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_3XlE2NefcBEkIbhcsVxT1I1V
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: thanks
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 677 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 661, Completion: 16, Total: 677
‚úÖ Updated username mapping for creativecampus (1304209255741784141)
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_3XlE2NefcBEkIbhcsVxT1I1V
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 695 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 684, Completion: 11, Total: 695
‚úÖ Updated username mapping for creativecampus (1304209255741784141)
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_3XlE2NefcBEkIbhcsVxT1I1V
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: What do you do?
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 736 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 706, Completion: 30, Total: 736
‚úÖ Updated username mapping for creativecampus (1304209255741784141)
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_3XlE2NefcBEkIbhcsVxT1I1V
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hwey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 755 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 744, Completion: 11, Total: 755
‚è≥ Initiating shutdown...
‚úÖ Async database connection closed.
‚úÖ Shutdown complete. Exiting process now...
Waiting for MySQL to be fully ready...
MySQL is ready!
[2025-03-24 19:56:27] [INFO    ] discord.client: logging in using static token
[2025-03-24 19:56:27] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 54022c91225923abcf5e713952462889).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ User lookup table already exists
‚úÖ Logged in as Cali#5463
‚è≥ Initiating shutdown...
‚úÖ Async database connection closed.
‚úÖ Shutdown complete. Exiting process now...
Waiting for MySQL to be fully ready...
MySQL is ready!
[2025-03-24 20:19:49] [INFO    ] discord.client: logging in using static token
[2025-03-24 20:19:50] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: b8f3a9f3550b95bebe6195d548ac044c).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ User lookup table already exists
‚úÖ Logged in as Cali#5463
/home/ec2-user/.local/lib/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
‚úÖ Updated username mapping for creativecampus (1304209255741784141)
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_3XlE2NefcBEkIbhcsVxT1I1V
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 773 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 762, Completion: 11, Total: 773
/home/ec2-user/.local/lib/python3.9/site-packages/aiomysql/cursors.py:239: Warning: 'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead
  await self._query(query)
‚úÖ Updated username mapping for creativecampus (1304209255741784141)
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_3XlE2NefcBEkIbhcsVxT1I1V
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: What's up
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 796 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 770, Completion: 26, Total: 796
‚úÖ Updated username mapping for creativecampus (1304209255741784141)
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_3XlE2NefcBEkIbhcsVxT1I1V
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Updated username mapping for creativecampus (1304209255741784141)
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_3XlE2NefcBEkIbhcsVxT1I1V
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hi
‚ö†Ô∏è Ignoring message in thread thread_3XlE2NefcBEkIbhcsVxT1I1V - already processing.
‚úÖ Logged token usage for user 1304209255741784141: 800 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 790, Completion: 10, Total: 800
‚è≥ Initiating shutdown...
‚úÖ Async database connection closed.
‚úÖ Shutdown complete. Exiting process now...
Waiting for MySQL to be fully ready...
MySQL is ready!
[2025-03-24 20:27:26] [INFO    ] discord.client: logging in using static token
[2025-03-24 20:27:27] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: a543b6d4e92dbc142d460d9bd20993b4).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ User lookup table already exists
‚úÖ Logged in as Cali#5463
‚úÖ Updated username mapping for creativecampus (1304209255741784141)
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_3XlE2NefcBEkIbhcsVxT1I1V
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 807 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 795, Completion: 12, Total: 807
‚úÖ Updated username mapping for dje85 (548752969395470337)
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Howdy
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 766 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 755, Completion: 11, Total: 766
‚úÖ Updated username mapping for pace_70020 (1351287252441108600)
‚úÖ Created new thread for user 1351287252441108600: thread_X3NvrDwomMA7Zw7MOfWKDfhk
‚úÖ Stored thread ID for user 1351287252441108600. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1351287252441108600: 641 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 630, Completion: 11, Total: 641
‚úÖ Updated username mapping for pace_70020 (1351287252441108600)
‚úÖ Retrieved existing thread from cache/MySQL for user 1351287252441108600: thread_X3NvrDwomMA7Zw7MOfWKDfhk
‚úÖ Stored thread ID for user 1351287252441108600. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: dont need anything
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1351287252441108600: 667 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 650, Completion: 17, Total: 667
‚úÖ Updated username mapping for pace_70021 (1351287252441108600)
‚úÖ Retrieved existing thread from cache/MySQL for user 1351287252441108600: thread_X3NvrDwomMA7Zw7MOfWKDfhk
‚úÖ Stored thread ID for user 1351287252441108600. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1351287252441108600: 685 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 674, Completion: 11, Total: 685
‚úÖ Updated username mapping for pace_70021 (1351287252441108600)
‚úÖ Retrieved existing thread from cache/MySQL for user 1351287252441108600: thread_X3NvrDwomMA7Zw7MOfWKDfhk
‚úÖ Stored thread ID for user 1351287252441108600. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: thanks
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1351287252441108600: 707 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 692, Completion: 15, Total: 707
[2025-03-24 20:48:38] [ERROR   ] discord.client: Attempting a reconnect in 1.99s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 20:48:41] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session a543b6d4e92dbc142d460d9bd20993b4.
‚úÖ Updated username mapping for pace_70021 (1351287252441108600)
‚úÖ Retrieved existing thread from cache/MySQL for user 1351287252441108600: thread_X3NvrDwomMA7Zw7MOfWKDfhk
‚úÖ Stored thread ID for user 1351287252441108600. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1351287252441108600: 725 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 714, Completion: 11, Total: 725
üîç No stale cache entries found.
üîç No stale cache entries found.
üîç No stale cache entries found.
[2025-03-24 23:35:03] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session a543b6d4e92dbc142d460d9bd20993b4.
‚úÖ Updated username mapping for dje85 (548752969395470337)
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Howdy
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 758 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 750, Completion: 8, Total: 758
[2025-03-25 00:27:05] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session a543b6d4e92dbc142d460d9bd20993b4.
üîç No stale cache entries found.
[2025-03-25 00:59:42] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session a543b6d4e92dbc142d460d9bd20993b4.
üîç No stale cache entries found.
[2025-03-25 01:52:19] [ERROR   ] discord.client: Attempting a reconnect in 0.94s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-25 01:52:20] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session a543b6d4e92dbc142d460d9bd20993b4.
üîç No stale cache entries found.
üîç No stale cache entries found.
üîç No stale cache entries found.
[2025-03-25 05:25:30] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session a543b6d4e92dbc142d460d9bd20993b4.
üîç No stale cache entries found.
[2025-03-25 05:59:18] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session a543b6d4e92dbc142d460d9bd20993b4.
üîç No stale cache entries found.
[2025-03-25 07:01:11] [ERROR   ] discord.client: Attempting a reconnect in 1.88s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-25 07:01:13] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session a543b6d4e92dbc142d460d9bd20993b4.
[2025-03-25 07:10:10] [ERROR   ] discord.client: Attempting a reconnect in 3.48s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-25 07:10:13] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session a543b6d4e92dbc142d460d9bd20993b4.
[2025-03-25 07:21:13] [ERROR   ] discord.client: Attempting a reconnect in 2.40s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-25 07:21:16] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session a543b6d4e92dbc142d460d9bd20993b4.
üîç No stale cache entries found.
[2025-03-25 07:35:42] [ERROR   ] discord.client: Attempting a reconnect in 9.43s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-25 07:35:51] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session a543b6d4e92dbc142d460d9bd20993b4.
[2025-03-25 07:41:21] [ERROR   ] discord.client: Attempting a reconnect in 12.75s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-25 07:41:34] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session a543b6d4e92dbc142d460d9bd20993b4.
[2025-03-25 07:55:19] [ERROR   ] discord.client: Attempting a reconnect in 60.16s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-25 07:56:20] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session a543b6d4e92dbc142d460d9bd20993b4.
[2025-03-25 08:01:08] [ERROR   ] discord.client: Attempting a reconnect in 28.81s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-25 08:01:37] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session a543b6d4e92dbc142d460d9bd20993b4.
[2025-03-25 08:10:33] [ERROR   ] discord.client: Attempting a reconnect in 214.05s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-25 08:14:08] [INFO    ] discord.gateway: Shard ID None session has been invalidated.
[2025-03-25 08:14:13] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 0444efa8cf7d5f8050642e9f09c83013).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ User lookup table already exists
‚úÖ Logged in as Cali#5463
üîç No stale cache entries found.
üîç No stale cache entries found.
[2025-03-25 09:16:00] [ERROR   ] discord.client: Attempting a reconnect in 1.43s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-25 09:16:02] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session 0444efa8cf7d5f8050642e9f09c83013.
[2025-03-25 09:21:32] [ERROR   ] discord.client: Attempting a reconnect in 0.94s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-25 09:21:33] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session 0444efa8cf7d5f8050642e9f09c83013.
[2025-03-25 09:24:59] [ERROR   ] discord.client: Attempting a reconnect in 5.07s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-25 09:25:04] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session 0444efa8cf7d5f8050642e9f09c83013.
üîç No stale cache entries found.
[2025-03-25 09:31:16] [ERROR   ] discord.client: Attempting a reconnect in 0.33s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-25 09:31:16] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session 0444efa8cf7d5f8050642e9f09c83013.
[2025-03-25 10:00:01] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session 0444efa8cf7d5f8050642e9f09c83013.
üîç No stale cache entries found.
üîç No stale cache entries found.
üîç No stale cache entries found.
üîç No stale cache entries found.
üîç No stale cache entries found.
üîç No stale cache entries found.
üîç No stale cache entries found.
[2025-03-25 13:17:58] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session 0444efa8cf7d5f8050642e9f09c83013.
üîç No stale cache entries found.
üîç No stale cache entries found.
üîç No stale cache entries found.
[2025-03-25 14:30:20] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session 0444efa8cf7d5f8050642e9f09c83013.
üîç No stale cache entries found.
[2025-03-25 15:22:59] [ERROR   ] discord.client: Attempting a reconnect in 1.30s
Traceback (most recent call last):
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/.local/lib/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-25 15:23:01] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session 0444efa8cf7d5f8050642e9f09c83013.
üîç No stale cache entries found.
üîç No stale cache entries found.
üîç No stale cache entries found.
[2025-03-25 17:01:09] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session 0444efa8cf7d5f8050642e9f09c83013.
üîç No stale cache entries found.
üîç No stale cache entries found.
‚úÖ Updated username mapping for victoriamirocke (973680778200358932)
‚úÖ Retrieved existing thread from cache/MySQL for user 973680778200358932: thread_B9cVh0HSSgp06zl4GsjjoE2D
‚úÖ Stored thread ID for user 973680778200358932. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 973680778200358932: 665 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 653, Completion: 12, Total: 665
‚úÖ Updated username mapping for pace_70021 (1351287252441108600)
‚úÖ Retrieved existing thread from cache/MySQL for user 1351287252441108600: thread_X3NvrDwomMA7Zw7MOfWKDfhk
‚úÖ Stored thread ID for user 1351287252441108600. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: howdy partner
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1351287252441108600: 746 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 734, Completion: 12, Total: 746
