[2025-03-20 18:47:33] [WARNING ] discord.gateway: Shard ID None heartbeat blocked for more than 10 seconds.
Loop thread traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 441, in <module>
    bot.run(DISCORD_TOKEN)
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 869, in run
    asyncio.run(runner())
  File "/usr/lib64/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib64/python3.9/asyncio/base_events.py", line 634, in run_until_complete
    self.run_forever()
  File "/usr/lib64/python3.9/asyncio/base_events.py", line 601, in run_forever
    self._run_once()
  File "/usr/lib64/python3.9/asyncio/base_events.py", line 1905, in _run_once
    handle._run()
  File "/usr/lib64/python3.9/asyncio/events.py", line 95, in _run
    self = None  # Needed to break cycles when an exception occurs.
  File "/usr/lib64/python3.9/asyncio/tasks.py", line 933, in callback
    raise
  File "/usr/lib64/python3.9/asyncio/futures.py", line 401, in _chain_future
    source.add_done_callback(_call_set_state)
  File "/usr/lib64/python3.9/asyncio/base_futures.py", line 21, in isfuture
    return (hasattr(obj.__class__, '_asyncio_future_blocking') and

[2025-03-20 18:47:37] [INFO    ] discord.gateway: Shard ID None session has been invalidated.
[2025-03-20 18:47:51] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 9c6ed006bf549f2028d6bad0d00d8a09).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Logged in as Cali#5463
[2025-03-20 18:49:30] [WARNING ] discord.gateway: Shard ID None heartbeat blocked for more than 10 seconds.
Loop thread traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 441, in <module>
    bot.run(DISCORD_TOKEN)
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 869, in run
    asyncio.run(runner())
  File "/usr/lib64/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib64/python3.9/asyncio/base_events.py", line 634, in run_until_complete
    self.run_forever()
  File "/usr/lib64/python3.9/asyncio/base_events.py", line 601, in run_forever
    self._run_once()
  File "/usr/lib64/python3.9/asyncio/base_events.py", line 1905, in _run_once
    handle._run()
  File "/usr/lib64/python3.9/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "/usr/lib64/python3.9/asyncio/selector_events.py", line 811, in _read_ready
    self._read_ready_cb()
  File "/usr/lib64/python3.9/asyncio/selector_events.py", line 868, in _read_ready__data_received
    self._protocol.data_received(data)

[2025-03-20 18:49:32] [ERROR   ] discord.client: Attempting a reconnect in 1.74s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_MkK1hroi2sfEnuolSnNslbiu
[2025-03-20 18:49:41] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session 9c6ed006bf549f2028d6bad0d00d8a09.
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚è≥ Initiating shutdown...
‚úÖ Async database connection closed.
‚úÖ Shutdown complete. Exiting process now...
[2025-03-20 18:51:22] [INFO    ] discord.client: logging in using static token
[2025-03-20 18:51:23] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: fea01479004b0fb2f9fb94b520f36aa2).
Task exception was never retrieved
future: <Task finished name='Task-10' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:178> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 190, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 129, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-12' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:178> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 190, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 129, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Logged in as Cali#5463
[2025-03-20 18:59:03] [INFO    ] discord.client: logging in using static token
[2025-03-20 18:59:03] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 38fbb47db07f564ff72792c058a2e99b).
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
[2025-03-20 19:02:39] [INFO    ] discord.client: logging in using static token
[2025-03-20 19:02:40] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 2a88f85f28809579d70e51110f2fde5e).
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
Task exception was never retrieved
future: <Task finished name='Task-16' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:178> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 190, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 129, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-21' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:178> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 190, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 129, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
[2025-03-20 19:09:30] [INFO    ] discord.client: logging in using static token
[2025-03-20 19:09:31] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: f8bfbb58f110163b881f8fa86f817503).
Task exception was never retrieved
future: <Task finished name='Task-10' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:178> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 190, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 129, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
[2025-03-20 19:11:27] [INFO    ] discord.client: logging in using static token
[2025-03-20 19:11:28] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 86d739f463dcd29307bb80ef8d41d92a).
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
[2025-03-20 19:19:57] [INFO    ] discord.client: logging in using static token
[2025-03-20 19:19:58] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: adc6a5b3166d57e925151ad726273ebf).
Task exception was never retrieved
future: <Task finished name='Task-10' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:178> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 190, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 129, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Logged in as Cali#5463
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_MkK1hroi2sfEnuolSnNslbiu
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Retrieved existing thread from cache/MySQL for user 973680778200358932: thread_kSugRCOPvyBozTAAazs1LpCo
‚úÖ Stored thread ID for user 973680778200358932. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hello
‚è≥ Processing OpenAI request...
‚úÖ Retrieved existing thread from cache/MySQL for user 973680778200358932: thread_kSugRCOPvyBozTAAazs1LpCo
‚úÖ Stored thread ID for user 973680778200358932. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: what is 2 plus 2
‚è≥ Processing OpenAI request...
‚úÖ Retrieved existing thread from cache/MySQL for user 973680778200358932: thread_kSugRCOPvyBozTAAazs1LpCo
‚úÖ Stored thread ID for user 973680778200358932. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: thanks
‚è≥ Processing OpenAI request...
[2025-03-20 20:53:32] [ERROR   ] discord.client: Attempting a reconnect in 0.52s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-20 20:53:32] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-20 23:18:26] [ERROR   ] discord.client: Attempting a reconnect in 2.00s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-20 23:18:28] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_MkK1hroi2sfEnuolSnNslbiu
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
[2025-03-20 23:47:50] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 02:03:40] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 02:05:59] [ERROR   ] discord.client: Attempting a reconnect in 0.29s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-21 02:05:59] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 06:03:35] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 08:22:41] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 08:47:54] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 09:39:45] [ERROR   ] discord.client: Attempting a reconnect in 1.34s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-21 09:39:46] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 11:11:24] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 14:15:37] [ERROR   ] discord.client: Attempting a reconnect in 1.85s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-21 14:15:39] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-21 16:31:22] [ERROR   ] discord.client: Attempting a reconnect in 1.48s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-21 16:31:23] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_MkK1hroi2sfEnuolSnNslbiu
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_MkK1hroi2sfEnuolSnNslbiu
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: what is up
‚ö†Ô∏è Ignoring message in thread thread_MkK1hroi2sfEnuolSnNslbiu - already processing.
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_MkK1hroi2sfEnuolSnNslbiu
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Howdy partner
‚è≥ Processing OpenAI request...
[2025-03-21 20:14:59] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
üßπ ‚úÖ Removed cached thread for inactive user 973680778200358932.
[2025-03-21 21:05:27] [ERROR   ] discord.client: Attempting a reconnect in 0.29s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-21 21:05:27] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 00:08:20] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 02:59:17] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 05:04:12] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 07:58:31] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 09:03:34] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 10:55:33] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 13:16:48] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 15:35:38] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 15:53:09] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 16:44:59] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-22 18:30:32] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
üßπ ‚úÖ Removed cached thread for inactive user 1304209255741784141.
[2025-03-22 22:30:27] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 01:48:02] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 04:43:30] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 05:58:45] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 06:14:30] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 06:40:22] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 09:52:49] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 11:17:39] [ERROR   ] discord.client: Attempting a reconnect in 1.52s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-23 11:17:40] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 14:43:40] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 16:02:58] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 18:48:35] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 20:37:13] [ERROR   ] discord.client: Attempting a reconnect in 1.56s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-23 20:37:14] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-23 22:57:50] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 00:19:20] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 03:04:28] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 05:43:48] [ERROR   ] discord.client: Attempting a reconnect in 0.58s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 05:43:49] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 07:53:24] [ERROR   ] discord.client: Attempting a reconnect in 1.52s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 07:53:26] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 08:56:06] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 09:56:32] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 10:17:50] [ERROR   ] discord.client: Attempting a reconnect in 1.78s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 10:17:52] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 10:39:52] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 11:11:03] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 12:38:38] [ERROR   ] discord.client: Attempting a reconnect in 0.72s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 12:38:39] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 13:51:54] [ERROR   ] discord.client: Attempting a reconnect in 0.99s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 13:51:55] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 14:18:21] [ERROR   ] discord.client: Attempting a reconnect in 0.98s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 14:18:22] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 14:26:46] [ERROR   ] discord.client: Attempting a reconnect in 3.81s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 14:26:50] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 15:59:27] [ERROR   ] discord.client: Attempting a reconnect in 0.33s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 15:59:27] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 16:10:12] [ERROR   ] discord.client: Attempting a reconnect in 4.00s
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/client.py", line 667, in connect
    await self.ws.poll_event()
  File "/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/discord/gateway.py", line 648, in poll_event
    raise ConnectionClosed(self.socket, shard_id=self.shard_id, code=code) from None
discord.errors.ConnectionClosed: Shard ID None WebSocket closed with 1000
[2025-03-24 16:10:16] [INFO    ] discord.gateway: Shard ID None has successfully RESUMED session adc6a5b3166d57e925151ad726273ebf.
[2025-03-24 16:13:10] [INFO    ] discord.client: logging in using static token
[2025-03-24 16:13:12] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 4b6c6d7a173b883af5f0d2f51536991e).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table created or verified
‚úÖ Logged in as Cali#5463
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_MkK1hroi2sfEnuolSnNslbiu
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 772 tokens
‚úÖ Token usage recorded - Purpose: general, Model: gpt-4o-mini, Prompt: 762, Completion: 10, Total: 772
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_0VEAv2pqRkPwUQf6iihE5pJ6
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 779 tokens
‚úÖ Token usage recorded - Purpose: general, Model: gpt-4o-mini, Prompt: 768, Completion: 11, Total: 779
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_0VEAv2pqRkPwUQf6iihE5pJ6
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Summarize this
üîπ Detected image: https://cdn.discordapp.com/attachments/1341170981867225140/1353763925526839361/IMG_1877.png?ex=67e2d667&is=67e184e7&hm=1ab4904dbcc7eedd0a0ba2701bc53781bd5c31fbca5c905b4ecb4cf39e72e134&
‚úÖ Image successfully saved at: discord-images/img_1877.png
‚úÖ Image uploaded to OpenAI. File ID: file-RyZgrS9ksuELbGAHPbBJWG
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 6501 tokens
‚úÖ Token usage recorded - Purpose: general, Model: gpt-4o-mini, Prompt: 6429, Completion: 72, Total: 6501
‚è≥ Initiating shutdown...
‚úÖ Async database connection closed.
‚úÖ Shutdown complete. Exiting process now...
[2025-03-24 16:18:12] [INFO    ] discord.client: logging in using static token
[2025-03-24 16:18:13] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: fdc099d0600d479f93e13a93169f0a34).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/aiomysql/cursors.py:239: Warning: Table 'token_tracking' already exists
  await self._query(query)
‚úÖ Token tracking table created or verified
‚úÖ Logged in as Cali#5463
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_0VEAv2pqRkPwUQf6iihE5pJ6
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚ùå Failed to log token usage: (1054, "Unknown column 'purpose' in 'field list'")
‚úÖ Token usage recorded - Purpose: Cali's Response Guidelines

### Core Directives
You are Cali. This stands for Creative AI for Learni, Model: gpt-4o-mini, Prompt: 6485, Completion: 11, Total: 6496
[2025-03-24 16:25:57] [INFO    ] discord.client: logging in using static token
[2025-03-24 16:25:57] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 366b88722b9e316e529af4344106b224).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/aiomysql/cursors.py:239: Warning: Table 'token_tracking' already exists
  await self._query(query)
‚úÖ Token tracking table created or verified
‚úÖ Logged in as Cali#5463
[2025-03-24 16:26:33] [INFO    ] discord.client: logging in using static token
[2025-03-24 16:26:34] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 3613b14fa9c0446a2ef43ba4822ae150).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
/home/ec2-user/ai-assistant/venv/lib64/python3.9/site-packages/aiomysql/cursors.py:239: Warning: Table 'token_tracking' already exists
  await self._query(query)
‚úÖ Token tracking table created or verified
‚úÖ Logged in as Cali#5463
‚úÖ Created new thread for user 1304209255741784141: thread_rlRL3VoPKAcTF8fiYNLxLqre
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 641 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 630, Completion: 11, Total: 641
‚úÖ Retrieved existing thread from cache/MySQL for user 1304209255741784141: thread_rlRL3VoPKAcTF8fiYNLxLqre
‚úÖ Stored thread ID for user 1304209255741784141. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: What is the capital of china
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 1304209255741784141: 658 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 653, Completion: 5, Total: 658
‚úÖ Created new thread for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Summarize this for me
üìÑ Detected file: https://cdn.discordapp.com/attachments/1341170981867225140/1353767275446014126/GLOBAL_-_Phone_3a_Series_-_Press_Release.pdf?ex=67e2d986&is=67e18806&hm=9ce4d745b38fcb585da55000fa5197b55513ba6138ca74253a6040b0db7db8d2&
‚úÖ File successfully saved at: discord-files/global_-_phone_3a_series_-_press_release.pdf
‚úÖ Extracted 11285 characters from global_-_phone_3a_series_-_press_release.pdf
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 3385 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 3242, Completion: 143, Total: 3385
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Howdy
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 3403 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 3392, Completion: 11, Total: 3403
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: What‚Äôs up
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 3437 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 3412, Completion: 25, Total: 3437
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Nothing really just checking in
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 3476 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 3448, Completion: 28, Total: 3476
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 3495 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 3483, Completion: 12, Total: 3495
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: What‚Äôs up
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 3521 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 3504, Completion: 17, Total: 3521
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Tell me about the moon
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 3636 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 3532, Completion: 104, Total: 3636
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: My favorite color is purple
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 1059 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 1030, Completion: 29, Total: 1059
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Cool
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 940 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 916, Completion: 24, Total: 940
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Thanks
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 941 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 927, Completion: 14, Total: 941
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Great
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 927 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 912, Completion: 15, Total: 927
[2025-03-24 16:53:29] [INFO    ] discord.client: logging in using static token
[2025-03-24 16:53:29] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 7a54b7983cd08b2d502b7086d7cff1f1).
‚ùå Async database connection failed: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
‚ùå Failed to connect to async MySQL.
‚úÖ Logged in as Cali#5463
Task exception was never retrieved
future: <Task finished name='Task-10' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:222> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 234, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 171, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-15' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:222> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 234, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 171, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
Task exception was never retrieved
future: <Task finished name='Task-20' coro=<handle_user_message() done, defined at /home/ec2-user/ai-assistant/bot.py:222> exception=AttributeError("'NoneType' object has no attribute 'acquire'")>
Traceback (most recent call last):
  File "/home/ec2-user/ai-assistant/bot.py", line 234, in handle_user_message
    thread_id = await get_thread_id(user_id)
  File "/home/ec2-user/ai-assistant/bot.py", line 171, in get_thread_id
    async with db_pool.acquire() as conn:
AttributeError: 'NoneType' object has no attribute 'acquire'
[2025-03-24 16:59:36] [INFO    ] discord.client: logging in using static token
[2025-03-24 16:59:37] [INFO    ] discord.gateway: Shard ID None has connected to Gateway (Session ID: 794b5630718d24df9a73bcc0336c419f).
‚úÖ Connected to MySQL database (async)
‚úÖ Async MySQL connection established.
‚úÖ Token tracking table already exists
‚úÖ Logged in as Cali#5463
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 903 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 892, Completion: 11, Total: 903
‚úÖ Retrieved existing thread from cache/MySQL for user 548752969395470337: thread_5nTTB7tWKycc9frBkfvicbyC
‚úÖ Stored thread ID for user 548752969395470337. (Cached & Async MySQL, Timestamp Updated)
üìù Received text: Hey
‚è≥ Processing OpenAI request...
‚úÖ Logged token usage for user 548752969395470337: 807 tokens
‚úÖ Token usage recorded - Model: gpt-4o-mini, Prompt: 795, Completion: 12, Total: 807
